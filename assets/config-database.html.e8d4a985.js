import{_ as e,o as t,c as p,b as s,d as n,e as o,a as i,r as c}from"./app.cd1ca4f8.js";const l={},u=s("h1",{id:"\u914D\u7F6E\u6570\u636E\u5E93",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u914D\u7F6E\u6570\u636E\u5E93","aria-hidden":"true"},"#"),n(" \u914D\u7F6E\u6570\u636E\u5E93")],-1),r={href:"https://www.npmjs.com/package/sequelize",target:"_blank",rel:"noopener noreferrer"},d=i(`<h2 id="sequelize-\u96C6\u6210" tabindex="-1"><a class="header-anchor" href="#sequelize-\u96C6\u6210" aria-hidden="true">#</a> Sequelize \u96C6\u6210</h2><h3 id="\u5B89\u88C5\u6269\u5C55\u5305" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u6269\u5C55\u5305" aria-hidden="true">#</a> \u5B89\u88C5\u6269\u5C55\u5305</h3><div class="language-cmd ext-cmd line-numbers-mode"><pre class="language-cmd"><code>npm install --save @nestjs/sequelize sequelize sequelize-typescript mysql2
npm install --save-dev @types/sequelize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5FEB\u901F\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u901F\u914D\u7F6E" aria-hidden="true">#</a> \u5FEB\u901F\u914D\u7F6E</h3><p>\u4FEE\u6539 app.module.ts \u6587\u4EF6</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/common&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.controller&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.service&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SequelizeModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/sequelize&#39;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    SequelizeModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      dialect<span class="token operator">:</span> <span class="token string">&#39;mysql&#39;</span><span class="token punctuation">,</span>
      host<span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span>
      port<span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
      username<span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>
      database<span class="token operator">:</span> <span class="token string">&#39;kol&#39;</span><span class="token punctuation">,</span>
      models<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  controllers<span class="token operator">:</span> <span class="token punctuation">[</span>AppController<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>AppService<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="env-\u591A\u73AF\u5883\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#env-\u591A\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a> env \u591A\u73AF\u5883\u914D\u7F6E</h3><p><strong>1. \u521B\u5EFA env \u591A\u73AF\u5883\u914D\u7F6E\u6587\u4EF6</strong></p><p>\u5728\u9879\u76EE\u6839\u5206\u522B\u521B\u5EFA <code>.env</code> \u9ED8\u8BA4\u6240\u6709\u73AF\u5883\uFF0C<code>.development.env</code> \u5F00\u53D1\u73AF\u5883\uFF0C<code>.production.env</code> \u751F\u4EA7\u73AF\u5883\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u5206\u522B\u914D\u7F6E\u5404\u73AF\u5883\u76F8\u5173\u53D8\u91CF</p><p>\u4F8B\u5982 <code>.env</code> \u914D\u7F6E\u5982\u4E0B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DATABASE_USER=root
DATABASE_PASSWORD=root
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_DB=kol
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. \u521B\u5EFA database.config.ts \u914D\u7F6E\u6587\u4EF6</strong></p><p>\u521B\u5EFA src/config/database.config.ts \u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> SequelizeModuleOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/sequelize&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> databaseConfig <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> SequelizeModuleOptions <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    dialect<span class="token operator">:</span> <span class="token string">&#39;mysql&#39;</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_HOST</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_PORT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    username<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_USER</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_PASSWORD</span><span class="token punctuation">,</span>
    database<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_DB</span><span class="token punctuation">,</span>
    autoLoadModels<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> databaseConfig <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. \u4FEE\u6539 src/app.module.ts \u6587\u4EF6</strong></p><p>envFilePath \u591A\u73AF\u5883 env \u914D\u7F6E\u6587\u4EF6\u4F18\u5148\u7EA7\u4ECE\u5DE6\u5230\u53F3\u4F9D\u6B21\u964D\u4F4E\uFF0C\u6700\u5DE6\u8FB9\u914D\u7F6E\u6587\u4EF6\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u6700\u53F3\u8FB9\u914D\u7F6E\u6587\u4EF6\u4F18\u5148\u7EA7\u6700\u4F4E</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Module <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/common&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.controller&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./app.service&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SequelizeModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/sequelize&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> databaseConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./config/database.config&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nestjs/config&#39;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Module</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    ConfigModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      isGlobal<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      envFilePath<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.env</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token string">&#39;.env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      load<span class="token operator">:</span> <span class="token punctuation">[</span>databaseConfig<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    SequelizeModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span><span class="token function">databaseConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  controllers<span class="token operator">:</span> <span class="token punctuation">[</span>AppController<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>AppService<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17);function k(v,m){const a=c("ExternalLinkIcon");return t(),p("div",null,[u,s("p",null,[n("Nest \u5B98\u65B9\u63A8\u8350\u4E0E TypeORM \u96C6\u6210\u6765\u64CD\u4F5C\u6570\u636E\u5E93\u3002\u4F46\u51FA\u4E8E\u4E2A\u4EBA\u559C\u597D\uFF0C\u6211\u91C7\u7528\u4E0E "),s("a",r,[n("Sequelize"),o(a)]),n(" \u96C6\u6210\u7684\u65B9\u5F0F\u6765\u64CD\u4F5C\u6570\u636E\u5E93\u3002\u539F\u56E0\u662F TypeORM \u7684\u6587\u6863\u6CA1\u6709 Sequelize \u7684\u6587\u6863\u6E05\u6670\uFF0C\u5E76\u4E14 Sequelize \u53EF\u4EE5\u914D\u5408 sequelize-typescript-generator \u751F\u6210\u5668\u6765\u6839\u636E\u6570\u636E\u5E93\u8868\u5FEB\u901F\u7684\u751F\u6210\u6A21\u578B\u6587\u4EF6\uFF0C\u800C\u4E0D\u9700\u8981\u81EA\u5DF1\u624B\u52A8\u521B\u5EFA\u6A21\u578B\u6587\u4EF6\uFF0C\u8D85\u7EA7\u65B9\u4FBF\u5FEB\u6377\u3002")]),d])}const h=e(l,[["render",k],["__file","config-database.html.vue"]]);export{h as default};
